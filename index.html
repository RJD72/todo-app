<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ToDo App</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/x-icon" href="/icons/favicon.ico" />
  </head>
  <!-- Google tag (gtag.js) -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=G-QTFQ6SNKV8"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-QTFQ6SNKV8");
  </script>
  <body>
    <header>
      <h1>My To-Do List</h1>
    </header>
    <main>
      <!-- Notification Area -->
      <div
        aria-live="polite"
        id="notification"
        style="visibility: hidden"
      ></div>
      <div class="container">
        <button id="openModalBtn" tabindex="1" aria-label="Add New Task">
          Add Task
        </button>
        <ul id="taskList"></ul>
      </div>
    </main>

    <!-- Modal -->
    <div
      id="modal"
      role="dialog"
      aria-labelledby="modalTitle"
      aria-hidden="true"
      style="
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 1rem;
        border: 1px solid #ccc;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      "
    >
      <h2 id="modalTitle">Add a New Task</h2>
      <input
        type="text"
        id="modalTaskInput"
        placeholder="Task Name"
        tabindex="2"
      />
      <button id="closeModalBtn" tabindex="3">Close</button>
      <button id="saveTaskBtn" tabindex="4">Save Task</button>
    </div>

    <script>
      const openModalBtn = document.getElementById("openModalBtn");
      const closeModalBtn = document.getElementById("closeModalBtn");
      const saveTaskBtn = document.getElementById("saveTaskBtn");
      const modal = document.getElementById("modal");
      const modalTaskInput = document.getElementById("modalTaskInput");
      const taskList = document.getElementById("taskList");

      openModalBtn.addEventListener("click", () => {
        modal.setAttribute("aria-hidden", "false");
        modal.style.display = "block";
        modalTaskInput.focus(); // Focus on the input inside the modal
      });

      closeModalBtn.addEventListener("click", () => {
        modal.setAttribute("aria-hidden", "true");
        modal.style.display = "none";
        openModalBtn.focus(); // Return focus to the trigger
      });

      saveTaskBtn.addEventListener("click", () => {
        const taskName = modalTaskInput.value.trim();
        if (taskName) {
          const taskItem = document.createElement("li");
          taskItem.textContent = taskName;
          taskList.appendChild(taskItem);
          modalTaskInput.value = ""; // Clear the input
          modal.setAttribute("aria-hidden", "true");
          modal.style.display = "none";
          openModalBtn.focus(); // Return focus to the trigger
        } else {
          alert("Please enter a task name.");
        }
      });
    </script>
  </body>
</html>
